{
  "active": true,
  "connections": {
    "Code": {
      "main": [
        [
          {
            "node": "Sort",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Start1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "No Operation, do nothing": {
      "main": [
        []
      ]
    },
    "Sort": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking \"Test workflow\"": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "No Operation, do nothing",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Date & Time1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Replace Me": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Start1": {
      "main": [
        [
          {
            "node": "Replace Me",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Date & Time1": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2024-06-16T07:02:33.185Z",
  "id": "WbQ6Ohcj1B63W2FW",
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Ohronus_timer",
  "nodes": [
    {
      "parameters": {},
      "id": "847d1997-4dd5-4a53-84bf-a2aeec16d300",
      "name": "When clicking \"Test workflow\"",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        1060,
        460
      ]
    },
    {
      "parameters": {
        "jsCode": "return (\n[\n  {\n    \"Дата события\": \"2024-06-23T09:33:00.000+03:00\",\n    \"Имя события\": \"Третье событие\",\n    \"url\": \"https://www.notion.so/f753514c17ad4c4fa8d4e79ed61815da\"\n  },\n  {\n    \"Дата события\": \"2024-06-23T09:34:00.000+03:00\",\n    \"Имя события\": \"Третье событие\",\n    \"url\": \"https://www.notion.so/30f539e9ec3648b68c597fc8d857f24b\"\n  },\n  {\n    \"Дата события\": \"2024-06-23T09:35:00.000+03:00\",\n    \"Имя события\": \"Третье событие\",\n    \"url\": \"https://www.notion.so/19522f02dc454032bbbffbce6c86d05a\"\n  },\n  {\n    \"Дата события\": \"2024-06-23T09:34:20.000+03:00\",\n    \"Имя события\": \"Третье событие\",\n    \"url\": \"https://www.notion.so/d84bfbea2d2642dda94a2cc7abeb2b20\"\n  },\n  {\n    \"Дата события\": \"2024-06-23T09:35:07.000+03:00\",\n    \"Имя события\": \"Третье событие\",\n    \"url\": \"https://www.notion.so/ab3e049275bf4fc8bd9c180ded5d2370\"\n  }\n]\n);"
      },
      "id": "d4502f3f-c063-4691-95a7-9debf52f0348",
      "name": "Code",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1360,
        280
      ]
    },
    {
      "parameters": {
        "amount": "={{ $json.timeDifference.seconds }}"
      },
      "id": "9bfafec5-824c-46df-b5d9-72280b717d56",
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        2460,
        260
      ],
      "webhookId": "157305c2-d53c-409d-8f6e-afcfcf7d2905"
    },
    {
      "parameters": {},
      "id": "71fa2f61-13bd-44d1-8b46-4f42b06e929f",
      "name": "No Operation, do nothing",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        2220,
        20
      ]
    },
    {
      "parameters": {
        "operation": "formatDate",
        "date": "={{ $json['Дата события'] }}",
        "format": "X",
        "options": {}
      },
      "id": "020eb282-3ddb-4869-bc33-b3cae9bb9edd",
      "name": "Date & Time",
      "type": "n8n-nodes-base.dateTime",
      "typeVersion": 2,
      "position": [
        1620,
        40
      ]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "{\n  \"готово\": \"Готово\"\n}",
        "options": {}
      },
      "id": "8233242f-c136-4066-aa8b-3dee1701e6ee",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        2840,
        20
      ]
    },
    {
      "parameters": {
        "sortFieldsUi": {
          "sortField": [
            {
              "fieldName": "['Дата события']"
            }
          ]
        },
        "options": {}
      },
      "id": "ad73007d-a487-4851-8f3d-4258f34f1539",
      "name": "Sort",
      "type": "n8n-nodes-base.sort",
      "typeVersion": 1,
      "position": [
        1580,
        280
      ]
    },
    {
      "parameters": {
        "chatId": "206784276",
        "text": "=<b>Случилось событие  {{ $json['Имя события'] }} {{ $json['Дата события'] }}.</b> ",
        "replyMarkup": "inlineKeyboard",
        "additionalFields": {
          "parse_mode": "HTML"
        }
      },
      "id": "46866db8-b4b3-436a-af74-dbdf147b22c1",
      "name": "Start1",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        2700,
        260
      ],
      "credentials": {
        "telegramApi": {
          "id": "GNDPLmexphpeDDyV",
          "name": "ohronos"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "fb48549e-d761-4b83-bfb3-62757972b81c",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        2000,
        240
      ]
    },
    {
      "parameters": {},
      "id": "69d81b2d-7c48-457e-bbc1-7ac60275ae36",
      "name": "Replace Me",
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        2700,
        500
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "26808a65-f22f-47d3-a7be-6fa14e7dc4a8",
              "leftValue": "={{ $json['Дата события'] }}",
              "rightValue": "={{ $now }}",
              "operator": {
                "type": "dateTime",
                "operation": "afterOrEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "8d1336e6-af35-4daf-a2fe-e2275f44460f",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        1760,
        280
      ]
    },
    {
      "parameters": {
        "path": "ohronos_timer_start",
        "options": {}
      },
      "id": "296a37a1-83eb-4594-8aed-99f1e7b53d36",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        1060,
        280
      ],
      "webhookId": "4f7bb597-c36c-41cc-aadf-408aa332ff22",
      "disabled": true
    },
    {
      "parameters": {
        "operation": "getTimeBetweenDates",
        "startDate": "={{ $now }}",
        "endDate": "={{ $json['Дата события'] }}",
        "units": [
          "second"
        ],
        "options": {}
      },
      "id": "d765577c-0f70-4d63-8bd8-505901debb93",
      "name": "Date & Time1",
      "type": "n8n-nodes-base.dateTime",
      "typeVersion": 2,
      "position": [
        2240,
        260
      ]
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "executionTimeout": 1800
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2024-06-16T07:01:41.755Z",
      "updatedAt": "2024-06-16T07:01:41.755Z",
      "id": "eUkZw1ElfnLKRNRp",
      "name": "ohronus"
    }
  ],
  "triggerCount": 0,
  "updatedAt": "2024-06-23T06:32:39.000Z",
  "versionId": "fccc1232-8071-4179-a415-b6e2f08a31ff"
}